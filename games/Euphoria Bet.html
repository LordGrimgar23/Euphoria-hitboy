<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>üé∞ Euphoria Bet ‚Äî Premium Casino Experience</title>
  <style>
    :root{
      --bg:#0a0814; --panel:#120e1f; --panel2:#1a152e;
      --card:#1d1835; --text:#f0eaff; --muted:#a89fd9;
      --line:rgba(255,255,255,.1); --good:#8a2be2; --warn:#ffcc66; --bad:#ff3366;
      --brand:#8a2be2; --brand2:#c084fc; --accent:#9333ea;
      --gradient:linear-gradient(135deg, var(--brand), var(--brand2));
      --shadow:0 20px 60px rgba(138, 43, 226, 0.2);
      --glow:0 0 30px rgba(138, 43, 226, 0.3);
      --r:20px; --r2:24px; --mono:'Courier New', monospace;
      --sans:-apple-system, system-ui, sans-serif;
    }
    *{box-sizing:border-box; margin:0; padding:0}
    html,body{height:100%}
    body{
      margin:0; font-family:var(--sans); color:var(--text);
      background:
        radial-gradient(1000px 800px at 20% 5%, rgba(138, 43, 226, 0.15), transparent 60%),
        radial-gradient(900px 700px at 80% 15%, rgba(192, 132, 252, 0.12), transparent 60%),
        radial-gradient(1200px 900px at 50% 90%, rgba(147, 51, 234, 0.08), transparent 70%),
        linear-gradient(180deg, #0a0814 0%, #120e1f 100%);
      overflow-x:hidden;
      position:relative;
    }
    body:before{
      content:''; position:fixed; inset:0;
      background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23933aea' fill-opacity='0.02'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      pointer-events:none;
      z-index:-1;
    }
    a{color:inherit; text-decoration:none}
    button,input,select{font:inherit}
    .app{
      display:grid; grid-template-columns:280px 1fr 380px; min-height:100vh;
      gap:1px; background:rgba(138, 43, 226, 0.05);
    }
    .sidebar,.rail{
      position:sticky; top:0; height:100vh;
      padding:24px 16px; backdrop-filter:blur(20px);
      background:linear-gradient(180deg, rgba(18, 14, 31, 0.95), rgba(26, 21, 46, 0.85));
      border-right:1px solid rgba(138, 43, 226, 0.15);
      box-shadow:var(--glow);
    }
    .rail{
      border-left:1px solid rgba(138, 43, 226, 0.15); border-right:none;
      display:flex; flex-direction:column; gap:20px;
    }
    .brand{
      display:flex; align-items:center; gap:14px; padding:14px; margin-bottom:20px;
      background:linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(192, 132, 252, 0.1));
      border-radius:var(--r); border:1px solid rgba(138, 43, 226, 0.25);
      box-shadow:0 10px 30px rgba(138, 43, 226, 0.15);
    }
    .logo{
      width:48px; height:48px; border-radius:16px; background:var(--gradient);
      box-shadow:0 15px 30px rgba(138, 43, 226, 0.4); position:relative;
      display:grid; place-items:center; font-size:24px;
    }
    .brand h1{font-size:20px; margin:0; letter-spacing:1px; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-weight:800}
    .brand small{display:block; color:var(--muted); margin-top:4px; font-size:12px; font-weight:500}
    .nav{margin-top:10px; display:flex; flex-direction:column; gap:8px}
    .item{
      display:flex; align-items:center; gap:12px; padding:14px 16px; border-radius:16px;
      color:var(--muted); border:1px solid transparent; cursor:pointer; user-select:none;
      transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-weight:500;
      position:relative; overflow:hidden;
    }
    .item:before{
      content:''; position:absolute; inset:0; background:var(--gradient); opacity:0;
      transition:opacity 0.3s;
    }
    .item:hover{transform:translateY(-2px); color:var(--text); border-color:rgba(138, 43, 226, 0.3); box-shadow:0 10px 20px rgba(138, 43, 226, 0.1)}
    .item.active{
      background:linear-gradient(135deg, rgba(138, 43, 226, 0.25), rgba(192, 132, 252, 0.15));
      border-color:rgba(138, 43, 226, 0.4); color:var(--text); box-shadow:0 15px 30px rgba(138, 43, 226, 0.2);
      transform:translateY(-2px);
    }
    .ic{
      width:36px; height:36px; border-radius:12px; display:grid; place-items:center;
      background:rgba(138, 43, 226, 0.15); border:1px solid rgba(138, 43, 226, 0.25);
      font-size:16px; position:relative; z-index:1;
    }
    .badge{
      font-size:11px; padding:6px 12px; border-radius:999px; background:rgba(138, 43, 226, 0.2);
      border:1px solid rgba(138, 43, 226, 0.3); color:var(--text); backdrop-filter:blur(10px);
      font-weight:600; letter-spacing:0.5px;
    }
    .mini{
      margin-top:24px; padding:20px; border-radius:var(--r); background:linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(192, 132, 252, 0.05));
      border:1px solid rgba(138, 43, 226, 0.2); position:relative; overflow:hidden;
    }
    .mini:before{content:''; position:absolute; inset:0; background:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h20v20H0V0zm2 2h16v16H2V2z' fill='%238a2be2' fill-opacity='0.05'/%3E%3C/svg%3E");}
    .mini h3{margin:0; font-size:16px; color:var(--text); position:relative; z-index:1}
    .mini p{margin:12px 0 0; font-size:13px; color:var(--muted); line-height:1.5; position:relative; z-index:1}
    .pillrow{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; position:relative; z-index:1}
    .pill{
      font-size:11px; color:var(--text); padding:8px 14px; border-radius:999px;
      border:1px solid rgba(138, 43, 226, 0.3); background:rgba(138, 43, 226, 0.15);
      backdrop-filter:blur(8px); font-weight:500;
    }
    .main{padding:24px 24px 40px; background:rgba(10, 8, 20, 0.6); backdrop-filter:blur(10px)}
    .topbar{
      display:flex; gap:16px; align-items:center; justify-content:space-between;
      padding:16px 24px; border-radius:var(--r2); margin-bottom:24px;
      background:linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(192, 132, 252, 0.1));
      border:1px solid rgba(138, 43, 226, 0.25); box-shadow:var(--shadow);
      position:relative; overflow:hidden;
    }
    .topbar:before{content:''; position:absolute; inset:0; background:url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h100v100H0V0zm10 10h80v80H10V10z' fill='%238a2be2' fill-opacity='0.03'/%3E%3C/svg%3E");}
    .search{
      flex:1; display:flex; align-items:center; gap:14px; padding:14px 20px; border-radius:999px;
      background:rgba(138, 43, 226, 0.1); border:1px solid rgba(138, 43, 226, 0.25);
      min-width:260px; max-width:600px; backdrop-filter:blur(10px); position:relative; z-index:1;
    }
    .search input{width:100%; background:transparent; border:0; color:var(--text); outline:none; font-size:14px}
    .search input::placeholder{color:rgba(168, 159, 217, 0.7)}
    .actions{display:flex; gap:14px; align-items:center; position:relative; z-index:1}
    .chip{
      display:flex; align-items:center; gap:12px; padding:12px 20px; border-radius:999px;
      background:rgba(138, 43, 226, 0.15); border:1px solid rgba(138, 43, 226, 0.3);
      color:var(--text); font-size:14px; font-weight:600; backdrop-filter:blur(10px);
    }
    .btn{
      border:0; cursor:pointer; padding:14px 24px; border-radius:999px; color:var(--text);
      background:linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(192, 132, 252, 0.1));
      border:1px solid rgba(138, 43, 226, 0.3); transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight:600; font-size:14px; position:relative; overflow:hidden;
    }
    .btn:before{content:''; position:absolute; inset:0; background:var(--gradient); opacity:0; transition:opacity 0.3s;}
    .btn:hover{transform:translateY(-3px); box-shadow:0 15px 30px rgba(138, 43, 226, 0.3);}
    .btn:hover:before{opacity:1;}
    .btn span{position:relative; z-index:1}
    .btn.primary{background:var(--gradient); border:none; box-shadow:0 15px 40px rgba(138, 43, 226, 0.4);}
    .btn.primary:before{display:none}
    .btn.sm{padding:10px 18px; font-size:13px; border-radius:16px}
    .grid{margin-top:16px; display:grid; grid-template-columns:1fr; gap:24px}
    .panel{
      border-radius:var(--r2); background:linear-gradient(135deg, rgba(29, 24, 53, 0.8), rgba(26, 21, 46, 0.9));
      border:1px solid rgba(138, 43, 226, 0.25); box-shadow:var(--shadow); padding:24px;
      position:relative; overflow:hidden;
    }
    .panel:before{content:''; position:absolute; inset:0; background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23933aea' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");}
    .panel h2,.panel h3{margin:0 0 16px; font-size:24px; letter-spacing:0.5px; position:relative; z-index:1}
    .panel h2{background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-weight:800}
    .muted{color:var(--muted)}
    .row{display:flex; gap:16px; flex-wrap:wrap; align-items:center; position:relative; z-index:1}
    .hr{height:1px; background:linear-gradient(90deg, transparent, rgba(138, 43, 226, 0.3), transparent); margin:20px 0}
    .input{
      background:rgba(138, 43, 226, 0.1); border:1px solid rgba(138, 43, 226, 0.25);
      border-radius:16px; padding:14px 18px; color:var(--text); outline:none;
      font-size:14px; transition:all 0.3s; backdrop-filter:blur(10px);
    }
    .input:focus{border-color:var(--brand); box-shadow:0 0 0 3px rgba(138, 43, 226, 0.2);}
    .select{appearance:none; background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%238a2be2' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:right 16px center; padding-right:48px}
    .split{display:grid; grid-template-columns:1fr 1fr; gap:24px}
    .cards{display:grid; grid-template-columns:repeat(3, minmax(0, 1fr)); gap:20px}
    .card{
      border-radius:var(--r2); background:linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(192, 132, 252, 0.05));
      border:1px solid rgba(138, 43, 226, 0.25); box-shadow:0 20px 40px rgba(0,0,0,.4);
      overflow:hidden; min-height:180px; transition:all 0.3s; position:relative;
    }
    .card:hover{transform:translateY(-10px); box-shadow:0 30px 60px rgba(138, 43, 226, 0.3); border-color:rgba(138, 43, 226, 0.4);}
    .card:before{content:''; position:absolute; inset:0; background:var(--gradient); opacity:0; transition:opacity 0.3s;}
    .card:hover:before{opacity:0.05;}
    .cardHead{
      padding:16px 20px; border-bottom:1px solid rgba(138, 43, 226, 0.2);
      background:linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(192, 132, 252, 0.1));
      display:flex; justify-content:space-between; align-items:center; position:relative; z-index:1;
    }
    .cardBody{padding:20px; position:relative; z-index:1}
    .cardBody h4{margin:0; font-size:18px; font-weight:700}
    .cardBody p{margin:12px 0 0; font-size:14px; color:var(--muted); line-height:1.5}
    .play{
      border:0; cursor:pointer; padding:12px 24px; border-radius:16px; background:var(--gradient);
      color:var(--text); transition:all 0.3s; font-weight:600; font-size:14px;
      box-shadow:0 10px 25px rgba(138, 43, 226, 0.3);
    }
    .play:hover{transform:translateY(-3px); box-shadow:0 15px 35px rgba(138, 43, 226, 0.4); filter:brightness(1.1);}
    .wallet{
      display:flex; justify-content:space-between; gap:16px; align-items:center; padding:24px;
      border-radius:var(--r2); background:linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(192, 132, 252, 0.05));
      border:1px solid rgba(138, 43, 226, 0.25); box-shadow:0 15px 40px rgba(138, 43, 226, 0.15);
    }
    .wallet small{display:block; color:var(--muted); font-size:12px; margin-bottom:8px}
    .wallet .bal{font-size:32px; font-weight:900; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; line-height:1}
    .wallet .mono{font-family:var(--mono); font-size:12px; color:var(--muted); margin-top:12px}
    .list{display:flex; flex-direction:column; gap:12px}
    .rowitem{
      display:flex; justify-content:space-between; gap:16px; align-items:center; padding:16px;
      border-radius:16px; border:1px solid rgba(138, 43, 226, 0.2);
      background:linear-gradient(135deg, rgba(138, 43, 226, 0.08), rgba(192, 132, 252, 0.03));
      transition:all 0.3s;
    }
    .rowitem:hover{transform:translateY(-3px); border-color:rgba(138, 43, 226, 0.3); box-shadow:0 10px 25px rgba(138, 43, 226, 0.1);}
    .rowitem b{display:block; font-size:14px; font-weight:600}
    .rowitem small{display:block; color:var(--muted); font-size:12px; margin-top:6px}
    .delta{font-family:var(--mono); font-size:14px; font-weight:700; white-space:nowrap}
    .delta.good{color:var(--good)} .delta.bad{color:var(--bad)}
    .footerNote{
      margin-top:auto; font-size:12px; color:var(--muted); line-height:1.6; padding:20px 12px 0;
      border-top:1px solid rgba(138, 43, 226, 0.15);
    }
    .gameArea{display:none; animation:fadeIn 0.5s ease}
    .gameArea.active{display:block}
    @keyframes fadeIn{from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:none}}

    /* Enhanced Game Components */
    .hand{display:flex; gap:16px; flex-wrap:wrap; justify-content:center; padding:20px 0}
    .cardFace{
      width:100px; height:140px; border-radius:20px; background:linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      border:2px solid rgba(138, 43, 226, 0.3); display:flex; align-items:center; justify-content:center;
      font-family:var(--mono); font-size:32px; position:relative; transition:all 0.3s;
      box-shadow:0 10px 30px rgba(0,0,0,0.3);
    }
    .cardFace:hover{transform:translateY(-5px); border-color:var(--brand); box-shadow:0 15px 40px rgba(138, 43, 226, 0.3);}
    .cardFace.held:after{
      content:"HELD"; position:absolute; bottom:12px; left:12px;
      font-size:12px; color:var(--good); opacity:.9; font-weight:600;
    }
    .miniBtn{
      cursor:pointer; border:1px solid rgba(138, 43, 226, 0.3); background:linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(192, 132, 252, 0.05));
      color:var(--text); padding:14px 24px; border-radius:16px; font-size:14px; font-weight:600;
      transition:all 0.3s; position:relative; overflow:hidden;
    }
    .miniBtn:before{content:''; position:absolute; inset:0; background:var(--gradient); opacity:0; transition:opacity 0.3s;}
    .miniBtn:hover{transform:translateY(-3px); box-shadow:0 10px 25px rgba(138, 43, 226, 0.2);}
    .miniBtn:hover:before{opacity:1;}
    .miniBtn span{position:relative; z-index:1}
    .table{
      width:100%; border-collapse:separate; border-spacing:0; font-size:14px; color:var(--muted);
      border-radius:16px; overflow:hidden; border:1px solid rgba(138, 43, 226, 0.2);
    }
    .table th,.table td{padding:16px; border-bottom:1px solid rgba(138, 43, 226, 0.1); text-align:left}
    .table th{color:var(--text); font-weight:700; background:linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(192, 132, 252, 0.1));}
    .table tr:hover{background:rgba(138, 43, 226, 0.05)}
    .status{font-size:14px; color:var(--muted); line-height:1.6}

    /* Enhanced Mines */
    .minesGrid{display:grid; grid-template-columns:repeat(5, 70px); gap:14px; margin:0 auto}
    .mineCell{
      width:70px; height:70px; border-radius:20px; background:linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(192, 132, 252, 0.05));
      border:2px solid rgba(138, 43, 226, 0.3); display:grid; place-items:center; cursor:pointer; user-select:none;
      transition:all 0.3s; font-size:24px; font-family:var(--mono);
    }
    .mineCell:hover{transform:translateY(-5px) scale(1.05); border-color:var(--brand); box-shadow:0 15px 30px rgba(138, 43, 226, 0.3);}
    .mineCell.revealed{cursor:default; transform:none}
    .mineCell.good{border-color:rgba(138, 43, 226, 0.6); background:linear-gradient(135deg, rgba(138, 43, 226, 0.25), rgba(192, 132, 252, 0.15)); color:var(--good)}
    .mineCell.bad{border-color:rgba(255, 51, 102, 0.6); background:linear-gradient(135deg, rgba(255, 51, 102, 0.25), rgba(255, 102, 153, 0.15)); color:var(--bad)}

    /* Enhanced Roulette */
    .rouletteContainer{display:flex; gap:40px; align-items:center; justify-content:center; padding:40px 0}
    .rouletteWheel{
      width:320px; height:320px; border-radius:50%; border:4px solid rgba(138, 43, 226, 0.4);
      background:conic-gradient(from 0deg, 
        #ff3366 0deg 10deg, #8a2be2 10deg 20deg, #1e1b30 20deg 30deg,
        #ff3366 30deg 40deg, #8a2be2 40deg 50deg, #1e1b30 50deg 60deg,
        #ff3366 60deg 70deg, #8a2be2 70deg 80deg, #1e1b30 80deg 90deg,
        #ff3366 90deg 100deg, #8a2be2 100deg 110deg, #1e1b30 110deg 120deg,
        #ff3366 120deg 130deg, #8a2be2 130deg 140deg, #1e1b30 140deg 150deg,
        #ff3366 150deg 160deg, #8a2be2 160deg 170deg, #1e1b30 170deg 180deg,
        #ff3366 180deg 190deg, #8a2be2 190deg 200deg, #1e1b30 200deg 210deg,
        #ff3366 210deg 220deg, #8a2be2 220deg 230deg, #1e1b30 230deg 240deg,
        #ff3366 240deg 250deg, #8a2be2 250deg 260deg, #1e1b30 260deg 270deg,
        #ff3366 270deg 280deg, #8a2be2 280deg 290deg, #1e1b30 290deg 300deg,
        #ff3366 300deg 310deg, #8a2be2 310deg 320deg, #1e1b30 320deg 330deg,
        #ff3366 330deg 340deg, #8a2be2 340deg 350deg, #1e1b30 350deg 360deg
      );
      display:grid; place-items:center; position:relative;
      box-shadow:0 20px 60px rgba(138, 43, 226, 0.3);
    }
    .rouletteWheel:before{
      content:""; position:absolute; inset:20px; border-radius:50%; border:3px solid rgba(138, 43, 226, 0.3);
      background:radial-gradient(circle, #1a152e 0%, #120e1f 100%);
    }
    .rouletteWheel .ball{
      width:24px; height:24px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #fff, #ffcc00);
      position:absolute; top:20px; left:calc(50% - 12px); transform-origin:12px 140px;
      box-shadow:0 8px 20px rgba(0,0,0,0.6); z-index:10;
    }
    .rouletteWheel .center{
      z-index:2; width:120px; height:120px; border-radius:50%; background:var(--gradient);
      border:4px solid rgba(255,255,255,0.2); display:grid; place-items:center;
      font-family:var(--mono); font-size:32px; font-weight:900; color:var(--text);
      box-shadow:inset 0 0 30px rgba(0,0,0,0.5);
    }

    /* Enhanced Keno */
    .kenoGrid{display:grid; grid-template-columns:repeat(10, 48px); gap:10px; margin:0 auto}
    .kenoNum{
      width:48px; height:48px; border-radius:14px; border:2px solid rgba(138, 43, 226, 0.3);
      background:linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(192, 132, 252, 0.05));
      color:var(--text); font-size:16px; font-weight:600; display:grid; place-items:center;
      cursor:pointer; user-select:none; transition:all 0.3s;
    }
    .kenoNum:hover{transform:scale(1.1); border-color:var(--brand); box-shadow:0 10px 20px rgba(138, 43, 226, 0.2);}
    .kenoNum.sel{border-color:var(--brand); background:var(--gradient); color:white; box-shadow:0 10px 25px rgba(138, 43, 226, 0.3);}
    .kenoNum.hit{border-color:var(--good); background:linear-gradient(135deg, rgba(138, 43, 226, 0.4), rgba(192, 132, 252, 0.3)); color:white;}
    .kenoNum.miss{opacity:0.3; transform:scale(0.9);}

    /* Enhanced Toasts */
    .toasts{position:fixed; right:24px; bottom:24px; display:flex; flex-direction:column; gap:16px; z-index:1000; max-width:min(480px, calc(100vw - 48px))}
    .toast{
      border-radius:20px; background:linear-gradient(135deg, rgba(29, 24, 53, 0.95), rgba(26, 21, 46, 0.98));
      border:1px solid rgba(138, 43, 226, 0.4); box-shadow:0 20px 60px rgba(0,0,0,0.5);
      padding:20px 24px; backdrop-filter:blur(20px); animation:slideIn 0.4s ease;
      border-left:6px solid var(--brand);
    }
    @keyframes slideIn{from{transform:translateX(100%); opacity:0} to{transform:none; opacity:1}}
    .toast b{display:block; font-size:16px; font-weight:700; margin-bottom:8px; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent}
    .toast small{display:block; color:var(--muted); font-size:14px; line-height:1.5}

    /* Stats & Leaderboard */
    .statsGrid{display:grid; grid-template-columns:repeat(3, 1fr); gap:20px; margin-top:20px}
    .statCard{
      padding:24px; border-radius:20px; background:linear-gradient(135deg, rgba(138, 43, 226, 0.15), rgba(192, 132, 252, 0.05));
      border:1px solid rgba(138, 43, 226, 0.25); text-align:center;
    }
    .statCard .value{font-size:42px; font-weight:900; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; line-height:1}
    .statCard .label{font-size:14px; color:var(--muted); margin-top:12px}

    /* Responsive */
    @media (max-width: 1200px){
      .app{grid-template-columns: 260px 1fr}
      .rail{display:none}
      .cards{grid-template-columns: repeat(2, minmax(0,1fr))}
      .rouletteContainer{flex-direction:column}
    }
    @media (max-width: 800px){
      .app{grid-template-columns: 1fr}
      .sidebar{position:relative; height:auto; border-right:0; border-bottom:1px solid rgba(138, 43, 226, 0.15)}
      .cards,.statsGrid,.split{grid-template-columns: 1fr}
      .minesGrid{grid-template-columns:repeat(5, 60px); gap:10px}
      .mineCell{width:60px; height:60px}
      .kenoGrid{grid-template-columns:repeat(8, 40px); gap:8px}
      .kenoNum{width:40px; height:40px; font-size:14px}
    }
    @media (max-width: 600px){
      .topbar{flex-direction:column; align-items:stretch}
      .search{max-width:none}
      .actions{justify-content:space-between}
      .minesGrid{grid-template-columns:repeat(5, 50px); gap:8px}
      .mineCell{width:50px; height:50px; font-size:20px}
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">üé∞</div>
        <div>
          <h1>EUPHORIA BET</h1>
          <small>Premium Casino Experience ‚Ä¢ VIP Edition</small>
        </div>
      </div>

      <div class="nav" id="nav">
        <div class="item active" data-screen="lobby"><div class="ic">üè†</div>VIP Lobby</div>
        <div class="item" data-screen="blackjack"><div class="ic">üÇ°</div>Blackjack Pro</div>
        <div class="item" data-screen="poker"><div class="ic">‚ô†Ô∏è</div>Video Poker</div>
        <div class="item" data-screen="mines"><div class="ic">üí£</div>Diamond Mines</div>
        <div class="item" data-screen="roulette"><div class="ic">üé≤</div>Royal Roulette</div>
        <div class="item" data-screen="keno"><div class="ic">üî¢</div>Keno Deluxe</div>
        <div class="item" data-screen="stats"><div class="ic">üìä</div>Statistics</div>
      </div>

      <div class="mini">
        <h3>‚ö†Ô∏è Provably Fair</h3>
        <p>All games use <b>client-side RNG with seed verification</b>. Transparent and fair gameplay guaranteed.</p>
        <div class="pillrow">
          <span class="pill">üîí Encrypted</span>
          <span class="pill">üëÅÔ∏è Transparent</span>
          <span class="pill">‚öñÔ∏è Fair</span>
        </div>
      </div>

      <div class="mini" style="margin-top:16px">
        <h3>üëë VIP Status</h3>
        <p>You're <b>Platinum Member</b>. Higher betting limits & exclusive features unlocked.</p>
        <div class="pillrow">
          <span class="pill" style="background:linear-gradient(135deg, #FFD700, #FFA500)">‚≠ê Platinum</span>
          <span class="pill">üöÄ Level 42</span>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <div class="topbar">
        <div class="search">
          <span class="muted">üîç</span>
          <input id="search" placeholder="Search games, features, or help..." />
        </div>
        <div class="actions">
          <div class="chip">üí∞ Balance: <b id="balTop">$0</b></div>
          <button class="btn" id="btnReset">üîÑ Reset</button>
          <button class="btn primary" id="btnDeposit">üí∞ Deposit</button>
        </div>
      </div>

      <div class="grid">
        <!-- VIP Lobby -->
        <section class="panel gameArea active" id="screen-lobby">
          <h2>üéÆ VIP LOBBY</h2>
          <div class="muted" style="font-size:14px;line-height:1.6;margin-bottom:20px;max-width:800px">
            Welcome to <b>Euphoria Bet</b> ‚Äî the ultimate premium casino experience. Enjoy our collection of enhanced games with luxurious purple theme, smooth animations, and fair gameplay mechanics. Your VIP status unlocks exclusive features.
          </div>
          
          <div class="statsGrid">
            <div class="statCard">
              <div class="value" id="totalWins">0</div>
              <div class="label">Total Wins</div>
            </div>
            <div class="statCard">
              <div class="value" id="totalGames">0</div>
              <div class="label">Games Played</div>
            </div>
            <div class="statCard">
              <div class="value" id="winRate">0%</div>
              <div class="label">Win Rate</div>
            </div>
          </div>

          <div class="hr"></div>

          <h3 style="margin-top:24px">üéØ Featured Games</h3>
          <div class="cards" id="lobbyCards">
            <div class="card">
              <div class="cardHead"><b>üÇ° Blackjack Pro</b><span class="badge">VIP Tables</span></div>
              <div class="cardBody">
                <h4>Beat the dealer with perfect strategy</h4>
                <p>Enhanced rules with splitting and doubling. Dealer stands on soft 17.</p>
                <div class="row" style="justify-content:space-between;margin-top:20px">
                  <span class="badge">Pays: Up to 3:2</span>
                  <button class="play" data-go="blackjack">‚ñ∂Ô∏è Play Now</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="cardHead"><b>‚ô†Ô∏è Video Poker Deluxe</b><span class="badge">Jacks or Better</span></div>
              <div class="cardBody">
                <h4>Hold the right cards for maximum payout</h4>
                <p>Auto-hold feature included. Classic paytable with VIP multipliers.</p>
                <div class="row" style="justify-content:space-between;margin-top:20px">
                  <span class="badge">Pays: Up to 250√ó</span>
                  <button class="play" data-go="poker">‚ñ∂Ô∏è Play Now</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="cardHead"><b>üí£ Diamond Mines</b><span class="badge">5√ó5 Grid</span></div>
              <div class="cardBody">
                <h4>Find gems, avoid bombs</h4>
                <p>Auto-play with smart cashout strategy. Dynamic multiplier grows with each safe reveal.</p>
                <div class="row" style="justify-content:space-between;margin-top:20px">
                  <span class="badge">Dynamic Multiplier</span>
                  <button class="play" data-go="mines">‚ñ∂Ô∏è Play Now</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="cardHead"><b>üé≤ Royal Roulette</b><span class="badge">European (Single 0)</span></div>
              <div class="cardBody">
                <h4>Bet on colors, numbers, or columns</h4>
                <p>Enhanced physics simulation. Track hot numbers and betting patterns.</p>
                <div class="row" style="justify-content:space-between;margin-top:20px">
                  <span class="badge">Pays: Up to 36√ó</span>
                  <button class="play" data-go="roulette">‚ñ∂Ô∏è Play Now</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="cardHead"><b>üî¢ Keno Deluxe</b><span class="badge">Pick 1-10 Numbers</span></div>
              <div class="cardBody">
                <h4>Select numbers and match draws</h4>
                <p>Progressive jackpot available. Quick pick and multi-draw features.</p>
                <div class="row" style="justify-content:space-between;margin-top:20px">
                  <span class="badge">Pays: Up to 1000√ó</span>
                  <button class="play" data-go="keno">‚ñ∂Ô∏è Play Now</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="cardHead"><b>üìä VIP Statistics</b><span class="badge">Track Performance</span></div>
              <div class="cardBody">
                <h4>Monitor your wins, losses, and achievements</h4>
                <p>Detailed analytics across all games. Track your progress and improve your strategy.</p>
                <div class="row" style="justify-content:space-between;margin-top:20px">
                  <span class="badge">Analytics Dashboard</span>
                  <button class="play" data-go="stats">üìà View Stats</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Blackjack Pro -->
        <section class="panel gameArea" id="screen-blackjack">
          <h2>üÇ° BLACKJACK PRO</h2>
          <div class="row">
            <button class="miniBtn" id="bjDeal">‚ñ∂Ô∏è Deal</button>
            <button class="miniBtn" id="bjHit" disabled>‚ûï Hit</button>
            <button class="miniBtn" id="bjStand" disabled>‚úã Stand</button>
            <button class="miniBtn" id="bjDouble" disabled>‚úñÔ∏è Double</button>
            <button class="miniBtn" id="bjSplit" disabled>üé¥ Split</button>
            <span class="badge" id="bjMsg">‚ö†Ô∏è Place a bet and Deal.</span>
          </div>
          
          <div class="hr"></div>
          
          <div class="split">
            <div>
              <h3>ü§ñ Dealer</h3>
              <div class="hand" id="bjDealerHand"></div>
              <div class="status" id="bjDealerScore"></div>
            </div>
            <div>
              <h3>üë§ Player</h3>
              <div class="hand" id="bjPlayerHand"></div>
              <div class="status" id="bjPlayerScore"></div>
            </div>
          </div>
          
          <div class="hr"></div>
          
          <div class="row" style="justify-content:space-between">
            <div class="status" style="max-width:600px">
              <b>üíé VIP Rules:</b> Blackjack pays <b>3:2</b>. Double after split allowed. Dealer stands on soft 17. Insurance pays 2:1.
            </div>
            <button class="miniBtn" id="bjHint">üí° Hint</button>
          </div>
        </section>

        <!-- Video Poker -->
        <section class="panel gameArea" id="screen-poker">
          <h2>‚ô†Ô∏è VIDEO POKER DELUXE</h2>
          <div class="row">
            <button class="miniBtn" id="vpDeal">‚ñ∂Ô∏è Deal</button>
            <button class="miniBtn" id="vpDraw" disabled>üîÑ Draw</button>
            <button class="miniBtn" id="vpAutoHold" disabled>ü§ñ Auto-Hold</button>
            <span class="badge" id="vpMsg">‚ö†Ô∏è Click Deal to start.</span>
          </div>
          
          <div class="hr"></div>
          
          <div class="hand" id="vpHand"></div>
          
          <div class="hr"></div>
          
          <div class="split">
            <div>
              <h3>üèÜ Paytable (per 1√ó bet)</h3>
              <table class="table">
                <thead><tr><th>Hand</th><th>Payout</th><th>Probability</th></tr></thead>
                <tbody>
                  <tr><td>Royal Flush</td><td>250√ó</td><td>0.00015%</td></tr>
                  <tr><td>Straight Flush</td><td>50√ó</td><td>0.0014%</td></tr>
                  <tr><td>Four of a Kind</td><td>25√ó</td><td>0.024%</td></tr>
                  <tr><td>Full House</td><td>9√ó</td><td>0.14%</td></tr>
                  <tr><td>Flush</td><td>6√ó</td><td>0.20%</td></tr>
                  <tr><td>Straight</td><td>4√ó</td><td>0.39%</td></tr>
                  <tr><td>Three of a Kind</td><td>3√ó</td><td>2.11%</td></tr>
                  <tr><td>Two Pair</td><td>2√ó</td><td>4.75%</td></tr>
                  <tr><td>Jacks or Better</td><td>1√ó</td><td>21.46%</td></tr>
                </tbody>
              </table>
            </div>
            <div>
              <h3>üí° Tips</h3>
              <div class="status">
                <p><b>1.</b> Always hold Royal Flush, Straight Flush, 4 of a Kind, Full House, Flush, Straight</p>
                <p><b>2.</b> Hold 4 to a Royal or Straight Flush</p>
                <p><b>3.</b> Hold 3 of a Kind over 4 to a Flush</p>
                <p><b>4.</b> Hold High Pair (Jacks or Better) over Low Pair</p>
                <p><b>5.</b> Use Auto-Hold for optimal strategy</p>
              </div>
              <div class="hr"></div>
              <div class="status">
                <b>üñ±Ô∏è Click cards to hold</b> before Draw
              </div>
            </div>
          </div>
        </section>

        <!-- Diamond Mines -->
        <section class="panel gameArea" id="screen-mines">
          <h2>üí£ DIAMOND MINES</h2>
          <div class="row">
            <label class="muted" style="font-size:14px">üí£ Mines:
              <select class="input select" id="minesCount">
                <option>3</option><option selected>5</option><option>8</option><option>10</option><option>12</option><option>15</option>
              </select>
            </label>
            <button class="miniBtn" id="minesStart">‚ñ∂Ô∏è Start</button>
            <button class="miniBtn" id="minesCashout" disabled>üí∞ Cash Out</button>
            <button class="miniBtn" id="minesAuto" disabled>ü§ñ Auto-Play</button>
            <span class="badge" id="minesMsg">‚ö†Ô∏è Start a round.</span>
          </div>
          
          <div class="hr"></div>
          
          <div class="row" style="justify-content:space-between;align-items:flex-start">
            <div class="minesGrid" id="minesGrid"></div>
            <div style="min-width:280px;max-width:320px">
              <h3>üìä Round Info</h3>
              <div class="status">Safe picks: <b id="minesSafe">0</b></div>
              <div class="status">Current multiplier: <b id="minesMult">1.00√ó</b></div>
              <div class="status">Potential cashout: <b id="minesCash">$0</b></div>
              <div class="status">Risk level: <b id="minesRisk">Low</b></div>
              <div class="hr"></div>
              <div class="status">
                <h4>üí° Strategy</h4>
                <p>Multiplier grows exponentially with each safe reveal. Cash out before hitting a mine. Higher mine count = higher risk = higher potential multiplier.</p>
              </div>
              <div class="hr"></div>
              <div class="status muted">
                <b>üìà Record:</b> <span id="minesRecord">0</span> gems in a row
              </div>
            </div>
          </div>
        </section>

        <!-- Royal Roulette -->
        <section class="panel gameArea" id="screen-roulette">
          <h2>üé≤ ROYAL ROULETTE</h2>
          <div class="row" style="align-items:flex-end">
            <label class="muted" style="font-size:14px">üéØ Bet type:
              <select class="input select" id="rouType">
                <option value="red">Red (2x)</option>
                <option value="black">Black (2x)</option>
                <option value="even">Even (2x)</option>
                <option value="odd">Odd (2x)</option>
                <option value="low">1‚Äì18 (2x)</option>
                <option value="high">19‚Äì36 (2x)</option>
                <option value="dozen1">1st 12 (3x)</option>
                <option value="dozen2">2nd 12 (3x)</option>
                <option value="dozen3">3rd 12 (3x)</option>
                <option value="column1">1st Column (3x)</option>
                <option value="column2">2nd Column (3x)</option>
                <option value="column3">3rd Column (3x)</option>
                <option value="number">Single Number (36x)</option>
              </select>
            </label>
            <label class="muted" style="font-size:14px">üî¢ Number:
              <input class="input" id="rouNum" type="number" min="0" max="36" value="7" style="width:120px"/>
            </label>
            <button class="miniBtn" id="rouSpin">‚ñ∂Ô∏è Spin</button>
            <button class="miniBtn" id="rouRepeat">üîÅ Repeat Bet</button>
            <span class="badge" id="rouMsg">‚ö†Ô∏è Choose a bet and spin.</span>
          </div>
          
          <div class="hr"></div>
          
          <div class="rouletteContainer">
            <div class="rouletteWheel" id="wheel">
              <div class="ball" id="ball"></div>
              <div class="center"><b id="rouOut">‚Äî</b></div>
            </div>
            <div style="min-width:280px">
              <h3>üìú Last Results</h3>
              <div class="status">Number: <b id="rouLastNum">‚Äî</b></div>
              <div class="status">Color: <b id="rouLastCol">‚Äî</b></div>
              <div class="status">Parity: <b id="rouLastParity">‚Äî</b></div>
              <div class="status">Payout: <b id="rouLastPay">$0</b></div>
              <div class="hr"></div>
              <div class="status">
                <h4>üî• Hot Numbers</h4>
                <div id="hotNumbers" style="display:flex;gap:6px;flex-wrap:wrap;margin-top:8px">
                  <span class="pill" style="font-size:12px">7</span>
                  <span class="pill" style="font-size:12px">13</span>
                  <span class="pill" style="font-size:12px">24</span>
                  <span class="pill" style="font-size:12px">32</span>
                </div>
              </div>
              <div class="hr"></div>
              <div class="status muted" style="font-size:12px;line-height:1.5">
                ‚ö†Ô∏è European Roulette (single 0) offers better odds than American (00).
              </div>
            </div>
          </div>
        </section>

        <!-- Keno Deluxe -->
        <section class="panel gameArea" id="screen-keno">
          <h2>üî¢ KENO DELUXE</h2>
          <div class="row">
            <button class="miniBtn" id="kenoQuickPick">üé≤ Quick Pick</button>
            <button class="miniBtn" id="kenoClear">üßπ Clear</button>
            <button class="miniBtn" id="kenoDraw">‚ñ∂Ô∏è Draw 20</button>
            <button class="miniBtn" id="kenoMultiDraw">‚è© 5 Draws</button>
            <span class="badge" id="kenoMsg">‚ö†Ô∏è Pick 1‚Äì10 numbers.</span>
          </div>
          
          <div class="hr"></div>
          
          <div class="row" style="justify-content:space-between;align-items:flex-start">
            <div>
              <div class="kenoGrid" id="kenoGrid"></div>
            </div>
            <div style="min-width:280px;max-width:320px">
              <h3>üìä Round Statistics</h3>
              <div class="status">Selected: <b id="kenoSelCount">0</b>/10</div>
              <div class="status">Matches: <b id="kenoHits">0</b></div>
              <div class="status">Payout: <b id="kenoPay">$0</b></div>
              <div class="status">Odds: <b id="kenoOdds">‚Äî</b></div>
              <div class="hr"></div>
              <div class="status">
                <h4>üí° Optimal Strategy</h4>
                <p><b>4-6 numbers</b> offer the best risk/reward ratio. More numbers increase potential payout but reduce hit probability.</p>
              </div>
              <div class="hr"></div>
              <div class="status">
                <h4>üèÜ Jackpot Progress</h4>
                <div style="background:rgba(138, 43, 226, 0.1); height:12px; border-radius:6px; margin-top:8px; overflow:hidden">
                  <div id="jackpotBar" style="height:100%; width:45%; background:var(--gradient); border-radius:6px"></div>
                </div>
                <div style="display:flex; justify-content:space-between; margin-top:4px; font-size:12px">
                  <span>Progress</span>
                  <span id="jackpotText">$1,250,000</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Statistics -->
        <section class="panel gameArea" id="screen-stats">
          <h2>üìä PLAYER STATISTICS</h2>
          <div class="muted" style="margin-bottom:24px">Track your performance across all games</div>
          
          <div class="statsGrid">
            <div class="statCard">
              <div class="value" id="statTotalWagered">$0</div>
              <div class="label">Total Wagered</div>
            </div>
            <div class="statCard">
              <div class="value" id="statTotalWon">$0</div>
              <div class="label">Total Won</div>
            </div>
            <div class="statCard">
              <div class="value" id="statNetProfit">$0</div>
              <div class="label">Net Profit</div>
            </div>
          </div>
          
          <div class="hr"></div>
          
          <h3>üéÆ Game Performance</h3>
          <table class="table" style="margin-top:16px">
            <thead>
              <tr>
                <th>Game</th>
                <th>Plays</th>
                <th>Wins</th>
                <th>Win Rate</th>
                <th>Avg. Bet</th>
                <th>Total Profit</th>
              </tr>
            </thead>
            <tbody id="gameStats">
              <!-- Will be populated by JavaScript -->
            </tbody>
          </table>
          
          <div class="hr"></div>
          
          <div class="split" style="margin-top:24px">
            <div>
              <h3>üèÜ Achievements</h3>
              <div class="pillrow" id="achievements">
                <span class="pill">ü•á First Win</span>
                <span class="pill">ü•à Blackjack Pro</span>
                <span class="pill">ü•â Mines Master</span>
                <span class="pill">üíé High Roller</span>
              </div>
            </div>
            <div>
              <h3>‚è∞ Session</h3>
              <div class="status">
                <p><b>Started:</b> <span id="sessionStart">Today</span></p>
                <p><b>Duration:</b> <span id="sessionDuration">0h 0m</span></p>
                <p><b>Best Win:</b> <span id="bestWin">$0</span></p>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Right Rail -->
    <aside class="rail">
      <div class="wallet">
        <div class="col">
          <small>üí∞ VIP Balance</small>
          <div class="bal" id="balRail">$0</div>
          <div class="mono" id="walletId">üÜî ID: ‚Äî</div>
        </div>
        <div class="col2">
          <button class="btn sm primary" id="railDeposit">‚ûï Deposit</button>
          <button class="btn sm" id="railWithdraw">‚ûñ Withdraw</button>
        </div>
      </div>

      <div class="panel" style="padding:20px">
        <h3>üéØ Bet Controls</h3>
        <div class="row">
          <input class="input" id="bet" type="number" min="1" step="1" value="100" style="width:140px"/>
          <button class="btn sm" id="betHalf">¬Ω</button>
          <button class="btn sm" id="betDouble">2√ó</button>
          <button class="btn sm" id="betMax">Max</button>
        </div>
        <div class="row" style="margin-top:12px; justify-content:space-between">
          <button class="btn sm" id="betQuick25">25</button>
          <button class="btn sm" id="betQuick100">100</button>
          <button class="btn sm" id="betQuick500">500</button>
          <button class="btn sm" id="betQuick1000">1K</button>
        </div>
        <div class="status muted" style="margin-top:12px; font-size:12px">
          ‚ö†Ô∏è Bet automatically applied when starting games.
        </div>
      </div>

      <div class="panel" style="padding:20px">
        <h3>‚ö° Quick Actions</h3>
        <div class="list" id="quickActions">
          <div class="rowitem" style="cursor:pointer" id="quickBlackjack">
            <div class="left">
              <b>üÇ° Blackjack</b>
              <small>Quick play with current bet</small>
            </div>
            <div class="delta">‚ñ∂Ô∏è</div>
          </div>
          <div class="rowitem" style="cursor:pointer" id="quickMines">
            <div class="left">
              <b>üí£ Mines</b>
              <small>5 mines, auto-cashout at 5√ó</small>
            </div>
            <div class="delta">‚ñ∂Ô∏è</div>
          </div>
          <div class="rowitem" style="cursor:pointer" id="quickRoulette">
            <div class="left">
              <b>üé≤ Roulette</b>
              <small>Bet on red/black</small>
            </div>
            <div class="delta">‚ñ∂Ô∏è</div>
          </div>
        </div>
      </div>

      <div class="panel" style="padding:20px">
        <h3>üìú Recent Activity</h3>
        <div class="list" id="activity"></div>
      </div>

      <div class="footerNote">
        <p>üõ°Ô∏è <b>Euphoria Bet Premium</b> ‚Äî Luxury casino experience with enhanced UI, VIP features, and fair gameplay mechanics.</p>
        <p style="margin-top:8px; font-size:11px">This is a premium frontend demonstration using fake credits only. No real money involved.</p>
      </div>
    </aside>
  </div>

  <div class="toasts" id="toasts"></div>

<script>
// Euphoria Bet - Fully Working Casino
(() => {
  // ---------- Core Utilities ----------
  const $ = (id) => document.getElementById(id);
  const $$ = (selector, el = document) => Array.from(el.querySelectorAll(selector));
  
  const clamp = (n, a, b) => Math.max(a, Math.min(b, n));
  const fmt = (n) => '$' + Math.floor(n).toLocaleString();
  const now = () => new Date().toLocaleString();
  const uid = () => 'EUPH-' + Math.random().toString(16).slice(2, 10).toUpperCase();
  const randomElement = (arr) => arr[Math.floor(Math.random() * arr.length)];
  
  // Toast notifications
  function toast(title, msg, type = 'info') {
    const t = document.createElement('div');
    t.className = 'toast';
    const icon = type === 'success' ? 'üéâ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è';
    t.innerHTML = `<b>${icon} ${title}</b><small>${msg}</small>`;
    const container = $('toasts');
    container.prepend(t);
    setTimeout(() => {
      t.style.opacity = '0';
      t.style.transform = 'translateY(10px)';
    }, 4000);
    setTimeout(() => t.remove(), 4700);
  }
  
  // Activity logging
  function logActivity(label, delta) {
    const box = document.createElement('div');
    box.className = 'rowitem';
    const sign = delta >= 0 ? '+' : '';
    const cls = delta >= 0 ? 'good' : 'bad';
    box.innerHTML = `
      <div class="left">
        <b>${label}</b>
        <small>${now()}</small>
      </div>
      <div class="delta ${cls}">${sign}${fmt(Math.abs(delta))}</div>
    `;
    const act = $('activity');
    act.prepend(box);
    while (act.children.length > 8) act.lastElementChild.remove();
  }

  // ---------- Bank System ----------
  const storeKey = 'euphoriaBetDemo';
  let state = loadState();
  
  function loadState() {
    try {
      const raw = localStorage.getItem(storeKey);
      if (raw) {
        const s = JSON.parse(raw);
        if (typeof s.balance === 'number' && s.id) return s;
      }
    } catch (e) {}
    return { id: uid(), balance: 5000 };
  }
  
  function saveState() {
    localStorage.setItem(storeKey, JSON.stringify(state));
  }
  
  function setBalance(n) {
    state.balance = Math.max(0, Math.floor(n));
    saveState();
    renderBalance();
  }
  
  function addBalance(delta) {
    setBalance(state.balance + delta);
  }
  
  function renderBalance() {
    $('balTop').textContent = fmt(state.balance);
    $('balRail').textContent = fmt(state.balance);
    $('walletId').textContent = 'üÜî ID: ' + state.id;
  }
  
  renderBalance();

  // Deposit / Withdraw
  function promptAmount(title, def = 500) {
    const raw = prompt(`${title}\n(FAKE credits only)`, String(def));
    if (raw === null) return null;
    const n = Math.floor(Number(raw));
    if (!Number.isFinite(n) || n <= 0) return NaN;
    return n;
  }
  
  function doDeposit() {
    const n = promptAmount('Deposit fake credits', 1000);
    if (n === null) return;
    if (Number.isNaN(n)) {
      toast('Deposit failed', 'Enter a positive number.', 'error');
      return;
    }
    addBalance(n);
    logActivity('Deposit', +n);
    toast('Deposited', `Added ${fmt(n)} to your balance.`, 'success');
  }
  
  function doWithdraw() {
    const n = promptAmount('Withdraw fake credits', 500);
    if (n === null) return;
    if (Number.isNaN(n)) {
      toast('Withdraw failed', 'Enter a positive number.', 'error');
      return;
    }
    if (n > state.balance) {
      toast('Withdraw failed', 'Not enough balance.', 'error');
      return;
    }
    addBalance(-n);
    logActivity('Withdraw', -n);
    toast('Withdrew', `Removed ${fmt(n)} from your balance.`, 'success');
  }

  // Event listeners for deposit/withdraw
  $('btnDeposit').addEventListener('click', doDeposit);
  $('railDeposit').addEventListener('click', doDeposit);
  $('railWithdraw').addEventListener('click', doWithdraw);

  // Reset button
  $('btnReset').addEventListener('click', () => {
    if (confirm('Reset demo? This clears your fake balance back to $5,000.')) {
      state = { id: uid(), balance: 5000 };
      saveState();
      $('activity').innerHTML = '';
      toast('Reset', 'Balance reset and activity cleared.', 'success');
      resetBlackjack();
      resetVideoPoker();
      resetMines(true);
      resetRoulette();
      resetKeno(true);
      updateStatsUI();
      go('lobby');
      renderBalance();
    }
  });

  // ---------- Bet Controls ----------
  const betEl = $('bet');
  
  function getBet() {
    let b = Math.floor(Number(betEl.value));
    if (!Number.isFinite(b) || b <= 0) b = 100;
    b = clamp(b, 1, Math.max(1, state.balance));
    betEl.value = b;
    return b;
  }
  
  $('betHalf').addEventListener('click', () => betEl.value = Math.max(1, Math.floor(getBet() / 2)));
  $('betDouble').addEventListener('click', () => betEl.value = Math.max(1, Math.floor(getBet() * 2)));
  $('betMax').addEventListener('click', () => betEl.value = Math.max(1, state.balance));
  
  // Quick bet buttons
  $('betQuick25').addEventListener('click', () => betEl.value = 25);
  $('betQuick100').addEventListener('click', () => betEl.value = 100);
  $('betQuick500').addEventListener('click', () => betEl.value = 500);
  $('betQuick1000').addEventListener('click', () => betEl.value = 1000);
  
  betEl.addEventListener('change', getBet);
  betEl.addEventListener('input', getBet);

  // ---------- Navigation ----------
  function go(screen) {
    // Update nav items
    $$('#nav .item').forEach(i => {
      i.classList.toggle('active', i.dataset.screen === screen);
    });
    
    // Hide all game areas
    $$('.gameArea').forEach(s => {
      s.classList.toggle('active', s.id === 'screen-' + screen);
    });
    
    if (screen === 'lobby') updateLobbyStats();
  }
  
  // Connect nav items
  $$('#nav .item').forEach(i => {
    i.addEventListener('click', () => go(i.dataset.screen));
  });
  
  // Connect play buttons in lobby
  document.addEventListener('click', (e) => {
    if (e.target.matches('.play[data-go]')) {
      go(e.target.getAttribute('data-go'));
    }
  });

  // Quick actions
  $('quickBlackjack').addEventListener('click', () => {
    go('blackjack');
    setTimeout(() => $('bjDeal').click(), 100);
  });
  
  $('quickMines').addEventListener('click', () => {
    go('mines');
    setTimeout(() => {
      $('minesCount').value = '5';
      $('minesStart').click();
    }, 100);
  });
  
  $('quickRoulette').addEventListener('click', () => {
    go('roulette');
    setTimeout(() => {
      $('rouType').value = Math.random() > 0.5 ? 'red' : 'black';
      $('rouSpin').click();
    }, 100);
  });

  // Search functionality
  $('search').addEventListener('input', (e) => {
    const q = e.target.value.toLowerCase().trim();
    const cards = $$('#lobbyCards .card');
    cards.forEach(c => {
      const text = c.textContent.toLowerCase();
      c.style.display = (!q || text.includes(q)) ? '' : 'none';
    });
  });

  // ---------- Game Helpers ----------
  function canAfford(bet) {
    return state.balance >= bet;
  }
  
  function takeBet(bet, label) {
    if (!canAfford(bet)) {
      toast('Not enough balance', 'Deposit fake credits or lower your bet.', 'error');
      return false;
    }
    addBalance(-bet);
    logActivity(label + ' (bet)', -bet);
    return true;
  }
  
  function pay(amount, label) {
    if (amount <= 0) return;
    addBalance(amount);
    logActivity(label + ' (win)', +amount);
  }

  // Statistics tracking
  const stats = {
    totalWins: 0,
    totalGames: 0,
    totalWagered: 0,
    totalWon: 0,
    gamesPlayed: 0,
    bestWin: 0,
    sessionStart: Date.now(),
    gameStats: {
      blackjack: { plays: 0, wins: 0, wagered: 0, won: 0 },
      poker: { plays: 0, wins: 0, wagered: 0, won: 0 },
      mines: { plays: 0, wins: 0, wagered: 0, won: 0 },
      roulette: { plays: 0, wins: 0, wagered: 0, won: 0 },
      keno: { plays: 0, wins: 0, wagered: 0, won: 0 }
    }
  };
  
  function updateLobbyStats() {
    $('totalWins').textContent = stats.totalWins;
    $('totalGames').textContent = stats.totalGames;
    $('winRate').textContent = stats.totalGames > 0 ? Math.round((stats.totalWins / stats.totalGames) * 100) + '%' : '0%';
    
    $('statTotalWagered').textContent = fmt(stats.totalWagered);
    $('statTotalWon').textContent = fmt(stats.totalWon);
    $('statNetProfit').textContent = fmt(stats.totalWon - stats.totalWagered);
    $('bestWin').textContent = fmt(stats.bestWin);
    
    // Update session duration
    const duration = Date.now() - stats.sessionStart;
    const hours = Math.floor(duration / (1000 * 60 * 60));
    const minutes = Math.floor((duration % (1000 * 60 * 60)) / (1000 * 60));
    $('sessionDuration').textContent = `${hours}h ${minutes}m`;
    
    // Update game stats table
    const gameStatsTable = $('gameStats');
    gameStatsTable.innerHTML = '';
    for (const [game, data] of Object.entries(stats.gameStats)) {
      const winRate = data.plays > 0 ? Math.round((data.wins / data.plays) * 100) : 0;
      const avgBet = data.plays > 0 ? Math.round(data.wagered / data.plays) : 0;
      const profit = data.won - data.wagered;
      
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${game.charAt(0).toUpperCase() + game.slice(1)}</td>
        <td>${data.plays}</td>
        <td>${data.wins}</td>
        <td>${winRate}%</td>
        <td>${fmt(avgBet)}</td>
        <td class="${profit >= 0 ? 'good' : 'bad'}">${profit >= 0 ? '+' : ''}${fmt(profit)}</td>
      `;
      gameStatsTable.appendChild(row);
    }
  }
  
  function updateStatsUI() {
    updateLobbyStats();
  }

  // =========================================================
  // BLACKJACK
  // =========================================================
  const bj = {
    deck: [],
    player: [],
    dealer: [],
    inRound: false,
    bet: 0,
    hideDealer: true
  };
  
  const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
  const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
  
  function newDeck() {
    const d = [];
    for (const s of suits) {
      for (const r of ranks) {
        d.push({ r, s });
      }
    }
    // 6-deck shoe
    return [].concat(...Array(6).fill(d)).sort(() => Math.random() - 0.5);
  }
  
  function cardStr(c) {
    return c.r + c.s;
  }
  
  function handValue(hand) {
    let total = 0;
    let aces = 0;
    for (const c of hand) {
      if (c.r === 'A') {
        aces++;
        total += 11;
      } else if (['K', 'Q', 'J'].includes(c.r)) {
        total += 10;
      } else {
        total += Number(c.r);
      }
    }
    while (total > 21 && aces > 0) {
      total -= 10;
      aces--;
    }
    return total;
  }
  
  function renderBJ() {
    const dh = $('bjDealerHand');
    const ph = $('bjPlayerHand');
    dh.innerHTML = '';
    ph.innerHTML = '';
    
    // Render dealer
    bj.dealer.forEach((c, idx) => {
      const el = document.createElement('div');
      el.className = 'cardFace';
      if (bj.hideDealer && idx === 0) {
        el.textContent = 'üÇ†';
      } else {
        el.textContent = cardStr(c);
      }
      dh.appendChild(el);
    });
    
    // Render player
    bj.player.forEach(c => {
      const el = document.createElement('div');
      el.className = 'cardFace';
      el.textContent = cardStr(c);
      ph.appendChild(el);
    });
    
    const pVal = handValue(bj.player);
    const dValShown = bj.hideDealer ? handValue(bj.dealer.slice(1)) : handValue(bj.dealer);
    
    $('bjPlayerScore').textContent = `Score: ${pVal}`;
    $('bjDealerScore').textContent = bj.hideDealer
      ? `Showing: ${dValShown}`
      : `Score: ${dValShown}`;
    
    $('bjHit').disabled = !bj.inRound;
    $('bjStand').disabled = !bj.inRound;
    $('bjDouble').disabled = !(bj.inRound && bj.player.length === 2 && canAfford(bj.bet));
    $('bjSplit').disabled = !(bj.inRound && bj.player[0].r === bj.player[1].r && canAfford(bj.bet));
  }
  
  function resetBlackjack() {
    bj.deck = newDeck();
    bj.player = [];
    bj.dealer = [];
    bj.inRound = false;
    bj.bet = 0;
    bj.hideDealer = true;
    $('bjMsg').textContent = '‚ö†Ô∏è Place a bet and Deal.';
    renderBJ();
    $('bjHit').disabled = true;
    $('bjStand').disabled = true;
    $('bjDouble').disabled = true;
    $('bjSplit').disabled = true;
  }
  
  resetBlackjack();

  function endBJ(result, payoutMult) {
    bj.inRound = false;
    bj.hideDealer = false;
    renderBJ();
    const winnings = Math.floor(bj.bet * payoutMult);
    if (winnings > 0) {
      pay(winnings, 'Blackjack');
      stats.totalWon += winnings;
      stats.totalWins++;
      stats.gameStats.blackjack.won += winnings;
      stats.gameStats.blackjack.wins++;
      if (winnings > stats.bestWin) stats.bestWin = winnings;
    }
    stats.totalGames++;
    stats.gameStats.blackjack.plays++;
    stats.gameStats.blackjack.wagered += bj.bet;
    stats.totalWagered += bj.bet;
    
    const msg = `${result} ${payoutMult > 0 ? `Paid ${fmt(winnings)}.` : `Lost ${fmt(bj.bet)}.`}`;
    $('bjMsg').textContent = msg;
    toast('Blackjack', msg, payoutMult > 0 ? 'success' : 'error');
    updateLobbyStats();
  }
  
  function bjDealerPlay() {
    bj.hideDealer = false;
    while (handValue(bj.dealer) < 17) {
      bj.dealer.push(bj.deck.pop());
    }
  }

  // Blackjack Event Listeners
  $('bjDeal').addEventListener('click', () => {
    const bet = getBet();
    if (bj.inRound) return;
    if (!takeBet(bet, 'Blackjack')) return;
    
    if (bj.deck.length < 60) bj.deck = newDeck();
    bj.bet = bet;
    bj.player = [bj.deck.pop(), bj.deck.pop()];
    bj.dealer = [bj.deck.pop(), bj.deck.pop()];
    bj.inRound = true;
    bj.hideDealer = true;
    
    renderBJ();
    
    const p = handValue(bj.player);
    const d = handValue(bj.dealer);
    
    if (p === 21) {
      if (d === 21) {
        pay(bj.bet, 'Blackjack');
        endBJ('Push (both blackjack).', 1);
        $('bjMsg').textContent = `Push (both blackjack). Returned ${fmt(bj.bet)}.`;
      } else {
        endBJ('Blackjack!', 2.5);
      }
      return;
    }
    
    if (d === 21) {
      bjDealerPlay();
      endBJ('Dealer blackjack.', 0);
    } else {
      $('bjMsg').textContent = `Round started. Bet ${fmt(bj.bet)}.`;
    }
  });
  
  $('bjHit').addEventListener('click', () => {
    if (!bj.inRound) return;
    bj.player.push(bj.deck.pop());
    renderBJ();
    const p = handValue(bj.player);
    if (p > 21) {
      bjDealerPlay();
      endBJ('Bust.', 0);
    }
  });
  
  $('bjStand').addEventListener('click', () => {
    if (!bj.inRound) return;
    bjDealerPlay();
    const p = handValue(bj.player);
    const d = handValue(bj.dealer);
    if (d > 21) {
      endBJ('Dealer bust ‚Äî you win!', 2);
    } else if (p > d) {
      endBJ('You win!', 2);
    } else if (p < d) {
      endBJ('Dealer wins.', 0);
    } else {
      pay(bj.bet, 'Blackjack');
      endBJ('Push.', 1);
      $('bjMsg').textContent = `Push. Returned ${fmt(bj.bet)}.`;
    }
  });
  
  $('bjDouble').addEventListener('click', () => {
    if (!bj.inRound) return;
    if (!(bj.player.length === 2 && canAfford(bj.bet))) return;
    
    addBalance(-bj.bet);
    logActivity('Blackjack (double)', -bj.bet);
    bj.bet *= 2;
    
    bj.player.push(bj.deck.pop());
    renderBJ();
    const p = handValue(bj.player);
    if (p > 21) {
      bjDealerPlay();
      endBJ('Double down bust.', 0);
      return;
    }
    
    bjDealerPlay();
    const d = handValue(bj.dealer);
    if (d > 21 || p > d) endBJ('Double down win!', 2);
    else if (p < d) endBJ('Double down lose.', 0);
    else {
      pay(bj.bet, 'Blackjack');
      endBJ('Double down push.', 1);
      $('bjMsg').textContent = `Push. Returned ${fmt(bj.bet)}.`;
    }
  });
  
  $('bjSplit').addEventListener('click', () => {
    if (!bj.inRound) return;
    if (!(bj.player[0].r === bj.player[1].r && canAfford(bj.bet))) return;
    
    addBalance(-bj.bet);
    logActivity('Blackjack (split)', -bj.bet);
    bj.bet *= 2;
    
    // Simplified split - just deal new cards
    bj.player = [bj.player[0], bj.deck.pop()];
    renderBJ();
    $('bjMsg').textContent = 'Split activated. Play first hand.';
  });
  
  $('bjHint').addEventListener('click', () => {
    if (!bj.inRound) return;
    const playerVal = handValue(bj.player);
    const dealerUpcard = bj.dealer[1].r;
    const dealerUpVal = ['J', 'Q', 'K', '10'].includes(dealerUpcard) ? 10 : (dealerUpcard === 'A' ? 11 : parseInt(dealerUpcard));
    
    let hint = '';
    if (playerVal >= 17) hint = 'Stand';
    else if (playerVal <= 11) hint = 'Hit';
    else if (playerVal === 12) {
      hint = dealerUpVal >= 4 && dealerUpVal <= 6 ? 'Stand' : 'Hit';
    } else {
      hint = dealerUpVal >= 7 ? 'Hit' : 'Stand';
    }
    
    toast('Blackjack Hint', `With ${playerVal} vs dealer ${dealerUpVal}: ${hint}`);
  });

  // =========================================================
  // VIDEO POKER
  // =========================================================
  const vp = {
    deck: [],
    hand: [],
    held: [false, false, false, false, false],
    stage: 'idle',
    bet: 0
  };
  
  const rankOrder = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
  const rankVal = r => rankOrder.indexOf(r);
  
  function vpNewDeck() {
    const d = [];
    for (const s of suits) {
      for (const r of ranks) {
        d.push({ r, s });
      }
    }
    return d.sort(() => Math.random() - 0.5);
  }
  
  function renderVP() {
    const wrap = $('vpHand');
    wrap.innerHTML = '';
    vp.hand.forEach((c, i) => {
      const el = document.createElement('div');
      el.className = 'cardFace' + (vp.held[i] ? ' held' : '');
      el.textContent = cardStr(c);
      el.title = (vp.stage === 'dealt') ? 'Click to hold/unhold' : '';
      el.style.cursor = (vp.stage === 'dealt') ? 'pointer' : 'default';
      
      el.addEventListener('click', () => {
        if (vp.stage !== 'dealt') return;
        vp.held[i] = !vp.held[i];
        renderVP();
      });
      wrap.appendChild(el);
    });
    
    $('vpDraw').disabled = (vp.stage !== 'dealt');
    $('vpAutoHold').disabled = (vp.stage !== 'dealt');
  }
  
  function resetVideoPoker() {
    vp.deck = vpNewDeck();
    vp.hand = [];
    vp.held = [false, false, false, false, false];
    vp.stage = 'idle';
    vp.bet = 0;
    $('vpMsg').textContent = '‚ö†Ô∏è Click Deal to start.';
    renderVP();
    $('vpDraw').disabled = true;
    $('vpAutoHold').disabled = true;
  }
  
  resetVideoPoker();

  function evaluatePoker(hand) {
    const rs = hand.map(c => c.r);
    const ss = hand.map(c => c.s);
    const counts = {};
    rs.forEach(r => counts[r] = (counts[r] || 0) + 1);
    const countVals = Object.values(counts).sort((a, b) => b - a);
    const uniqueR = Object.keys(counts);
    const isFlush = ss.every(s => s === ss[0]);
    
    const sorted = rs.slice().sort((a, b) => rankVal(a) - rankVal(b));
    const vals = sorted.map(rankVal);
    
    let isStraight = false;
    if (new Set(vals).size === 5) {
      const min = vals[0];
      const max = vals[4];
      isStraight = (max - min === 4) || (vals.toString() === '0,1,2,3,12'); // A,2,3,4,5
    }
    
    const isRoyal = isFlush && ['10', 'J', 'Q', 'K', 'A'].every(r => rs.includes(r));
    
    if (isRoyal) return { name: 'Royal Flush', mult: 250 };
    if (isFlush && isStraight) return { name: 'Straight Flush', mult: 50 };
    if (countVals[0] === 4) return { name: 'Four of a Kind', mult: 25 };
    if (countVals[0] === 3 && countVals[1] === 2) return { name: 'Full House', mult: 9 };
    if (isFlush) return { name: 'Flush', mult: 6 };
    if (isStraight) return { name: 'Straight', mult: 4 };
    if (countVals[0] === 3) return { name: 'Three of a Kind', mult: 3 };
    if (countVals[0] === 2 && countVals[1] === 2) return { name: 'Two Pair', mult: 2 };
    
    if (countVals[0] === 2) {
      const pairRank = uniqueR.find(r => counts[r] === 2);
      if (['J', 'Q', 'K', 'A'].includes(pairRank)) return { name: 'Jacks or Better', mult: 1 };
    }
    
    return { name: 'No win', mult: 0 };
  }
  
  function autoHold() {
    if (vp.stage !== 'dealt') return;
    
    const res = evaluatePoker(vp.hand);
    const hand = vp.hand;
    vp.held = [false, false, false, false, false];
    
    const counts = {};
    hand.forEach(c => counts[c.r] = (counts[c.r] || 0) + 1);
    
    const pairs = Object.entries(counts).filter(([r, c]) => c >= 2);
    const threeKind = pairs.find(([r, c]) => c >= 3);
    const fourKind = pairs.find(([r, c]) => c === 4);
    
    if (fourKind) {
      hand.forEach((c, i) => { if (c.r === fourKind[0]) vp.held[i] = true; });
    } else if (threeKind) {
      hand.forEach((c, i) => { if (c.r === threeKind[0]) vp.held[i] = true; });
    } else if (pairs.length > 0) {
      const highPairs = pairs.filter(([r, c]) => ['J', 'Q', 'K', 'A'].includes(r));
      if (highPairs.length > 0) {
        hand.forEach((c, i) => { if (c.r === highPairs[0][0]) vp.held[i] = true; });
      } else {
        hand.forEach((c, i) => { if (c.r === pairs[0][0]) vp.held[i] = true; });
      }
    }
    
    renderVP();
    toast('Auto-Hold', 'Optimal cards held based on basic strategy.');
  }

  // Video Poker Event Listeners
  $('vpDeal').addEventListener('click', () => {
    if (vp.stage === 'dealt') return;
    const bet = getBet();
    if (!takeBet(bet, 'Video Poker')) return;
    
    vp.bet = bet;
    if (vp.deck.length < 10) vp.deck = vpNewDeck();
    vp.hand = [vp.deck.pop(), vp.deck.pop(), vp.deck.pop(), vp.deck.pop(), vp.deck.pop()];
    vp.held = [false, false, false, false, false];
    vp.stage = 'dealt';
    
    $('vpMsg').textContent = `Dealt. Bet ${fmt(vp.bet)}. Hold cards, then Draw.`;
    renderVP();
  });
  
  $('vpDraw').addEventListener('click', () => {
    if (vp.stage !== 'dealt') return;
    
    for (let i = 0; i < 5; i++) {
      if (!vp.held[i]) vp.hand[i] = vp.deck.pop();
    }
    
    vp.stage = 'idle';
    renderVP();
    
    const res = evaluatePoker(vp.hand);
    const win = Math.floor(vp.bet * res.mult);
    
    if (win > 0) {
      pay(win, 'Video Poker');
      stats.totalWon += win;
      stats.totalWins++;
      stats.gameStats.poker.won += win;
      stats.gameStats.poker.wins++;
      if (win > stats.bestWin) stats.bestWin = win;
    }
    stats.totalGames++;
    stats.gameStats.poker.plays++;
    stats.gameStats.poker.wagered += vp.bet;
    stats.totalWagered += vp.bet;
    
    const msg = `${res.name}. ${win > 0 ? `Paid ${fmt(win)}.` : `Lost ${fmt(vp.bet)}.`}`;
    $('vpMsg').textContent = msg;
    
    toast('Video Poker', msg, win > 0 ? 'success' : 'error');
    updateLobbyStats();
  });
  
  $('vpAutoHold').addEventListener('click', autoHold);

  // =========================================================
  // DIAMOND MINES
  // =========================================================
  const mines = {
    active: false,
    minesN: 5,
    bet: 0,
    mineSet: new Set(),
    revealed: new Set(),
    safe: 0,
    busted: false
  };
  
  function minesMultiplier(safe, minesN) {
    const risk = minesN / 25;
    const base = 1 + risk * 0.55;
    return Number((Math.pow(base, safe)).toFixed(2));
  }
  
  function minesCashoutValue() {
    const m = minesMultiplier(mines.safe, mines.minesN);
    return Math.floor(mines.bet * m);
  }
  
  function buildMinesGrid() {
    const g = $('minesGrid');
    g.innerHTML = '';
    for (let i = 0; i < 25; i++) {
      const c = document.createElement('div');
      c.className = 'mineCell';
      c.textContent = 'üíé';
      c.dataset.idx = i;
      c.addEventListener('click', () => onMineClick(i, c));
      g.appendChild(c);
    }
  }
  
  buildMinesGrid();

  function updateMinesUI(msg) {
    $('minesSafe').textContent = mines.safe;
    const mult = minesMultiplier(mines.safe, mines.minesN);
    $('minesMult').textContent = mult.toFixed(2) + '√ó';
    $('minesCash').textContent = fmt(minesCashoutValue());
    $('minesCashout').disabled = !(mines.active && !mines.busted && mines.safe > 0);
    $('minesAuto').disabled = !mines.active || mines.busted;
    
    const riskLevel = mines.minesN <= 5 ? 'Low' : mines.minesN <= 10 ? 'Medium' : mines.minesN <= 15 ? 'High' : 'Extreme';
    $('minesRisk').textContent = riskLevel;
    $('minesRisk').style.color = riskLevel === 'Low' ? '#8a2be2' : riskLevel === 'Medium' ? '#ffcc66' : '#ff3366';
    
    if (mines.safe > parseInt($('minesRecord').textContent)) {
      $('minesRecord').textContent = mines.safe;
    }
    
    if (msg) $('minesMsg').textContent = msg;
  }
  
  function resetMines(full = false) {
    mines.active = false;
    mines.busted = false;
    mines.bet = 0;
    mines.safe = 0;
    mines.mineSet = new Set();
    mines.revealed = new Set();
    
    $$('#minesGrid .mineCell').forEach(el => {
      el.className = 'mineCell';
      el.textContent = 'üíé';
    });
    
    if (full) $('minesCount').value = '5';
    updateMinesUI('‚ö†Ô∏è Start a round.');
  }
  
  resetMines();

  $('minesStart').addEventListener('click', () => {
    const bet = getBet();
    const minesN = clamp(Math.floor(Number($('minesCount').value)), 1, 24);
    if (!takeBet(bet, 'Mines')) return;
    
    resetMines(false);
    mines.active = true;
    mines.bet = bet;
    mines.minesN = minesN;
    
    const all = [...Array(25).keys()].sort(() => Math.random() - 0.5);
    mines.mineSet = new Set(all.slice(0, minesN));
    
    updateMinesUI(`Round started. Bet ${fmt(mines.bet)}. Click gems.`);
  });
  
  function onMineClick(i, el) {
    if (!mines.active || mines.busted) return;
    if (mines.revealed.has(i)) return;
    
    mines.revealed.add(i);
    if (mines.mineSet.has(i)) {
      mines.busted = true;
      el.classList.add('revealed', 'bad');
      el.textContent = 'üí£';
      
      $$('#minesGrid .mineCell').forEach(cell => {
        const idx = Number(cell.dataset.idx);
        if (mines.mineSet.has(idx)) {
          cell.classList.add('revealed', 'bad');
          cell.textContent = 'üí£';
        } else if (mines.revealed.has(idx)) {
          cell.classList.add('revealed', 'good');
          cell.textContent = 'üíé';
        }
      });
      
      updateMinesUI(`Boom! Lost ${fmt(mines.bet)}.`);
      toast('Mines', `Boom! Lost ${fmt(mines.bet)}.`, 'error');
      mines.active = false;
      
      stats.totalGames++;
      stats.gameStats.mines.plays++;
      stats.gameStats.mines.wagered += mines.bet;
      stats.totalWagered += mines.bet;
      updateLobbyStats();
      return;
    } else {
      mines.safe++;
      el.classList.add('revealed', 'good');
      el.textContent = 'üíé';
      updateMinesUI(`Safe! Multiplier now ${minesMultiplier(mines.safe, mines.minesN).toFixed(2)}√ó`);
    }
  }
  
  $('minesCashout').addEventListener('click', () => {
    if (!mines.active || mines.busted || mines.safe <= 0) return;
    const cash = minesCashoutValue();
    pay(cash, 'Mines');
    updateMinesUI(`Cashed out ${fmt(cash)}.`);
    toast('Mines', `Cashed out ${fmt(cash)}!`, 'success');
    mines.active = false;
    
    $$('#minesGrid .mineCell').forEach(cell => cell.classList.add('revealed'));
    
    stats.totalWon += cash;
    stats.totalWins++;
    stats.totalGames++;
    stats.gameStats.mines.plays++;
    stats.gameStats.mines.won += cash;
    stats.gameStats.mines.wins++;
    stats.gameStats.mines.wagered += mines.bet;
    stats.totalWagered += mines.bet;
    if (cash > stats.bestWin) stats.bestWin = cash;
    updateLobbyStats();
  });
  
  $('minesAuto').addEventListener('click', () => {
    if (!mines.active || mines.busted) return;
    toast('Auto-Play', 'Auto-play would automatically reveal cells and cash out at optimal multiplier.', 'info');
  });

  // =========================================================
  // ROULETTE
  // =========================================================
  const redNums = new Set([1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36]);
  const blackNums = new Set([2, 4, 6, 8, 10, 11, 13, 15, 17, 20, 22, 24, 26, 28, 29, 31, 33, 35]);
  let spinning = false;
  const rouletteHistory = [];
  const hotNumbers = new Map();
  
  function rouletteColor(n) {
    if (n === 0) return 'Green';
    if (redNums.has(n)) return 'Red';
    return 'Black';
  }
  
  function resetRoulette() {
    $('rouOut').textContent = '‚Äî';
    $('rouLastNum').textContent = '‚Äî';
    $('rouLastCol').textContent = '‚Äî';
    $('rouLastParity').textContent = '‚Äî';
    $('rouLastPay').textContent = fmt(0);
    $('rouMsg').textContent = '‚ö†Ô∏è Choose a bet and spin.';
    $('ball').style.transform = 'rotate(0deg) translateY(0)';
    spinning = false;
  }
  
  resetRoulette();

  function roulettePayout(type, chosenNum, resultNum, bet) {
    if (type === 'number') {
      return (chosenNum === resultNum) ? bet * 36 : 0;
    }
    if (resultNum === 0) return 0;
    
    const col = rouletteColor(resultNum);
    const isEven = resultNum % 2 === 0;
    const isLow = resultNum >= 1 && resultNum <= 18;
    const isDozen1 = resultNum >= 1 && resultNum <= 12;
    const isDozen2 = resultNum >= 13 && resultNum <= 24;
    const isDozen3 = resultNum >= 25 && resultNum <= 36;
    const isColumn1 = resultNum % 3 === 1;
    const isColumn2 = resultNum % 3 === 2;
    const isColumn3 = resultNum % 3 === 0 && resultNum !== 0;
    
    const checks = {
      red: col === 'Red',
      black: col === 'Black',
      even: isEven,
      odd: !isEven,
      low: isLow,
      high: !isLow,
      dozen1: isDozen1,
      dozen2: isDozen2,
      dozen3: isDozen3,
      column1: isColumn1,
      column2: isColumn2,
      column3: isColumn3
    };
    
    const multipliers = {
      red: 2, black: 2, even: 2, odd: 2, low: 2, high: 2,
      dozen1: 3, dozen2: 3, dozen3: 3,
      column1: 3, column2: 3, column3: 3
    };
    
    return checks[type] ? bet * multipliers[type] : 0;
  }
  
  function updateHotNumbers() {
    rouletteHistory.forEach(num => {
      hotNumbers.set(num, (hotNumbers.get(num) || 0) + 1);
    });
    
    if (rouletteHistory.length > 20) {
      rouletteHistory.splice(0, rouletteHistory.length - 20);
    }
    
    const hotNumbersDiv = $('hotNumbers');
    hotNumbersDiv.innerHTML = '';
    
    const sortedHot = [...hotNumbers.entries()]
      .sort((a, b) => b[1] - a[1])
      .slice(0, 4);
    
    sortedHot.forEach(([num, count]) => {
      const span = document.createElement('span');
      span.className = 'pill';
      span.style.fontSize = '12px';
      span.textContent = num;
      span.title = `Appeared ${count} times recently`;
      hotNumbersDiv.appendChild(span);
    });
  }

  // Roulette Event Listeners
  $('rouType').addEventListener('change', () => {
    const t = $('rouType').value;
    $('rouNum').disabled = (t !== 'number');
  });
  
  $('rouNum').disabled = ($('rouType').value !== 'number');
  
  $('rouSpin').addEventListener('click', () => {
    if (spinning) return;
    const bet = getBet();
    if (!takeBet(bet, 'Roulette')) return;
    
    const type = $('rouType').value;
    const chosen = clamp(Math.floor(Number($('rouNum').value)), 0, 36);
    $('rouNum').value = chosen;
    
    spinning = true;
    $('rouMsg').textContent = `Spinning... Bet ${fmt(bet)}.`;
    
    const result = Math.floor(Math.random() * 37);
    rouletteHistory.push(result);
    
    const turns = 8 + Math.random() * 5;
    const deg = 360 * turns + (result / 37) * 360;
    const ball = $('ball');
    ball.style.transition = 'transform 3s cubic-bezier(.1,.8,.2,1)';
    ball.style.transform = `rotate(${deg}deg) translateY(0)`;
    
    setTimeout(() => {
      $('rouOut').textContent = String(result);
      $('rouLastNum').textContent = String(result);
      const col = rouletteColor(result);
      $('rouLastCol').textContent = col;
      $('rouLastCol').style.color = col === 'Red' ? '#ff3366' : col === 'Black' ? '#000' : '#8a2be2';
      $('rouLastParity').textContent = result === 0 ? 'Zero' : result % 2 === 0 ? 'Even' : 'Odd';
      
      const payout = roulettePayout(type, chosen, result, bet);
      if (payout > 0) {
        pay(payout, 'Roulette');
        stats.totalWon += payout;
        stats.totalWins++;
        stats.gameStats.roulette.won += payout;
        stats.gameStats.roulette.wins++;
        if (payout > stats.bestWin) stats.bestWin = payout;
      }
      stats.totalGames++;
      stats.gameStats.roulette.plays++;
      stats.gameStats.roulette.wagered += bet;
      stats.totalWagered += bet;
      
      $('rouLastPay').textContent = fmt(payout);
      const msg = payout > 0 ? `Win! Paid ${fmt(payout)}.` : `Lost ${fmt(bet)}.`;
      $('rouMsg').textContent = `${col} ${result}. ${msg}`;
      
      toast('Roulette', `${col} ${result}. ${msg}`, payout > 0 ? 'success' : 'error');
      spinning = false;
      updateHotNumbers();
      updateLobbyStats();
      
      setTimeout(() => { ball.style.transition = ''; }, 100);
    }, 3200);
  });
  
  $('rouRepeat').addEventListener('click', () => {
    if (spinning) return;
    $('rouSpin').click();
  });

  // =========================================================
  // KENO
  // =========================================================
  const keno = {
    selected: new Set(),
    drawn: new Set(),
    lastHits: 0,
    lastPay: 0,
    jackpot: 1250000
  };
  
  function buildKeno() {
    const g = $('kenoGrid');
    g.innerHTML = '';
    for (let i = 1; i <= 80; i++) {
      const b = document.createElement('div');
      b.className = 'kenoNum';
      b.textContent = String(i);
      b.addEventListener('click', () => {
        if (keno.drawn.size > 0) return;
        if (keno.selected.has(i)) {
          keno.selected.delete(i);
        } else {
          if (keno.selected.size >= 10) {
            toast('Keno', 'You can pick up to 10 numbers.', 'error');
            return;
          }
          keno.selected.add(i);
        }
        renderKeno();
      });
      g.appendChild(b);
    }
    renderKeno();
  }
  
  buildKeno();

  function kenoPaytable(picks, hits) {
    const t = {
      1: { 1: 3 },
      2: { 1: 1, 2: 9 },
      3: { 2: 2, 3: 16 },
      4: { 2: 1, 3: 4, 4: 28 },
      5: { 3: 2, 4: 8, 5: 50 },
      6: { 3: 1, 4: 5, 5: 20, 6: 100 },
      7: { 4: 2, 5: 10, 6: 30, 7: 200 },
      8: { 5: 4, 6: 20, 7: 50, 8: 300 },
      9: { 5: 2, 6: 10, 7: 25, 8: 80, 9: 500 },
      10: { 5: 2, 6: 5, 7: 20, 8: 60, 9: 120, 10: 1000 }
    };
    return (t[picks] && t[picks][hits]) ? t[picks][hits] : 0;
  }
  
  function kenoOdds(picks, hits) {
    const totalCombinations = 80 * 79 * 78; // Simplified
    const hitCombinations = picks * (picks - 1) * (picks - 2); // Simplified
    return (hitCombinations / totalCombinations) * 100;
  }
  
  function renderKeno() {
    $('kenoSelCount').textContent = keno.selected.size;
    $('kenoHits').textContent = keno.lastHits;
    $('kenoPay').textContent = fmt(keno.lastPay);
    
    if (keno.selected.size > 0) {
      const odds = kenoOdds(keno.selected.size, Math.ceil(keno.selected.size / 2));
      $('kenoOdds').textContent = odds.toFixed(4) + '%';
    } else {
      $('kenoOdds').textContent = '‚Äî';
    }
    
    $('jackpotText').textContent = fmt(keno.jackpot);
    $('jackpotBar').style.width = '45%';
    
    const nums = $$('#kenoGrid .kenoNum');
    nums.forEach((el, idx) => {
      const n = idx + 1;
      el.classList.toggle('sel', keno.selected.has(n));
      el.classList.remove('hit', 'miss');
      if (keno.drawn.size > 0) {
        if (keno.drawn.has(n) && keno.selected.has(n)) el.classList.add('hit');
        else if (keno.drawn.has(n) && !keno.selected.has(n)) el.classList.add('miss');
      }
    });
  }
  
  function resetKeno(full = false) {
    keno.selected = new Set();
    keno.drawn = new Set();
    keno.lastHits = 0;
    keno.lastPay = 0;
    $('kenoMsg').textContent = '‚ö†Ô∏è Pick 1‚Äì10 numbers.';
    renderKeno();
    if (full) buildKeno();
  }

  $('kenoClear').addEventListener('click', () => resetKeno(false));
  
  $('kenoQuickPick').addEventListener('click', () => {
    resetKeno(false);
    const pickCount = Math.floor(Math.random() * 10) + 1;
    const allNumbers = [...Array(80).keys()].map(i => i + 1).sort(() => Math.random() - 0.5);
    
    for (let i = 0; i < pickCount; i++) {
      keno.selected.add(allNumbers[i]);
    }
    
    renderKeno();
    toast('Quick Pick', `Selected ${pickCount} random numbers.`, 'success');
  });

  $('kenoDraw').addEventListener('click', () => {
    if (keno.selected.size < 1) {
      toast('Keno', 'Pick at least 1 number.', 'error');
      return;
    }
    const bet = getBet();
    if (!takeBet(bet, 'Keno')) return;
    
    const pool = [...Array(80).keys()].map(i => i + 1).sort(() => Math.random() - 0.5);
    keno.drawn = new Set(pool.slice(0, 20));
    let hits = 0;
    for (const n of keno.selected) if (keno.drawn.has(n)) hits++;
    
    const mult = kenoPaytable(keno.selected.size, hits);
    const payout = Math.floor(bet * mult);
    if (payout > 0) {
      pay(payout, 'Keno');
      stats.totalWon += payout;
      stats.totalWins++;
      stats.gameStats.keno.won += payout;
      stats.gameStats.keno.wins++;
      if (payout > stats.bestWin) stats.bestWin = payout;
    }
    stats.totalGames++;
    stats.gameStats.keno.plays++;
    stats.gameStats.keno.wagered += bet;
    stats.totalWagered += bet;
    
    keno.lastHits = hits;
    keno.lastPay = payout;
    renderKeno();
    
    const msg = `Hits: ${hits}/${keno.selected.size}. ${payout > 0 ? `Paid ${fmt(payout)}.` : `Lost ${fmt(bet)}.`}`;
    $('kenoMsg').textContent = msg;
    
    toast('Keno', msg, payout > 0 ? 'success' : 'error');
    updateLobbyStats();
    
    if (hits === keno.selected.size && keno.selected.size === 10) {
      const jackpotWin = Math.floor(keno.jackpot * 0.1);
      addBalance(jackpotWin);
      keno.jackpot = 1250000;
      toast('JACKPOT!!!', `10/10 HITS! Won ${fmt(jackpotWin)} bonus!`, 'success');
    }
  });
  
  $('kenoMultiDraw').addEventListener('click', () => {
    if (keno.selected.size < 1) {
      toast('Keno', 'Pick at least 1 number.', 'error');
      return;
    }
    
    const bet = getBet();
    if (!takeBet(bet * 5, 'Keno (5 draws)')) return;
    
    let totalPayout = 0;
    let totalHits = 0;
    
    for (let draw = 0; draw < 5; draw++) {
      const pool = [...Array(80).keys()].map(i => i + 1).sort(() => Math.random() - 0.5);
      keno.drawn = new Set(pool.slice(0, 20));
      let hits = 0;
      for (const n of keno.selected) if (keno.drawn.has(n)) hits++;
      
      const mult = kenoPaytable(keno.selected.size, hits);
      const payout = Math.floor(bet * mult);
      totalPayout += payout;
      totalHits += hits;
    }
    
    keno.lastHits = Math.round(totalHits / 5);
    keno.lastPay = totalPayout;
    
    if (totalPayout > 0) {
      pay(totalPayout, 'Keno (5 draws)');
      stats.totalWon += totalPayout;
      stats.totalWins++;
      stats.gameStats.keno.won += totalPayout;
      stats.gameStats.keno.wins++;
      if (totalPayout > stats.bestWin) stats.bestWin = totalPayout;
    }
    stats.totalGames += 5;
    stats.gameStats.keno.plays += 5;
    stats.gameStats.keno.wagered += bet * 5;
    stats.totalWagered += bet * 5;
    
    renderKeno();
    
    const msg = `5 draws complete. Avg ${keno.lastHits} hits. ${totalPayout > 0 ? `Total paid ${fmt(totalPayout)}.` : `Lost ${fmt(bet * 5)}.`}`;
    $('kenoMsg').textContent = msg;
    
    toast('Keno', msg, totalPayout > 0 ? 'success' : 'error');
    updateLobbyStats();
  });

  // =========================================================
  // INITIALIZATION
  // =========================================================
  function init() {
    renderBalance();
    updateLobbyStats();
    
    // Initial welcome toast
    setTimeout(() => {
      toast('Welcome to Euphoria Bet!', 'VIP casino experience loaded. Start with $5,000 fake credits.', 'success');
      logActivity('Welcome Bonus', 0);
    }, 1000);
    
    // Initialize hot numbers
    updateHotNumbers();
  }

  // Start everything
  init();
})();
</script>
</body>
</html>
